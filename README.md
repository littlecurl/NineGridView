# **Android**å®ç°ä¹å®«æ ¼å›¾ç‰‡+è§†é¢‘æ··åˆå±•ç¤ºï¼ˆä»¿QQç©ºé—´ï¼‰

[TOC]

<img src="image/catalog.png"/>

## å†™åœ¨å‰é¢

**æç¤ºï¼šä»¥ä¸‹å›¾ç‰‡æˆ–è§†é¢‘é‡‡ç”¨çš„éƒ½æ˜¯Githubç›¸å¯¹è·¯å¾„ï¼Œè‹¥æœ‰åŠ è½½ä¸æˆåŠŸçš„ï¼Œè¯·å°è¯•åˆ·æ–°ç½‘é¡µé‡æ–°åŠ è½½ã€‚**

**å¦‚æœåˆ·æ–°è¿˜ä¸è¡Œå°±æŠŠè¯¥ä»“åº“ä¸‹è½½åˆ°æœ¬åœ°ï¼Œç”¨markdownç¼–è¾‘å™¨æ‰“å¼€æŸ¥çœ‹**

**å®ç°æ•ˆæœï¼š**[æ¼”ç¤ºè§†é¢‘](https://www.bilibili.com/video/av76318011/)   ğŸ‘ˆ æ‰˜ç®¡åˆ°å“”å“©å“”å“©äº†ï¼

**æ¼”ç¤ºæˆªå›¾ï¼š**

![ä¹å®«æ ¼å›¾ç‰‡](https://img-blog.csdnimg.cn/20191130164348197.png)

![ä¹å®«æ ¼å›¾ç‰‡2](https://img-blog.csdnimg.cn/20191130164352439.png)

**æœ¬æ–‡æºç ï¼š[[æˆ‘çš„Githubåœ°å€]](https://github.com/littlecurl/NineGridView)** æ¬¢è¿starï¼<img src="image/dianzan.png"/> <img src="image/haixiu.png"/>

**æœ¬æ–‡æ€è·¯ï¼š**

â€‹	**å…ˆ**ä»‹ç»ä¸€ä¸‹æ¡†æ¶çš„ç”±æ¥ï¼Œ**å†**è¯¦ç»†åˆ†ææ¡†æ¶ä¸­æ¯ä¸€éƒ¨åˆ†çš„ä½œç”¨ï¼Œ**ä¸­é—´**ä¼šç©¿æ’ä¸€äº›çŸ¥è¯†ç‚¹çš„è¯¦ç»†è®²è§£ï¼ˆæ¯”å¦‚é€‚é…å™¨æ¨¡å¼ï¼Œå±æ€§åŠ¨ç”»ç­‰ç­‰ï¼‰ï¼Œ**æœ€å**åšä¸ªæ€»ç»“ä¸æ„Ÿè°¢ã€‚

â€‹	ä¸è¿‡æœ‰ä¸‰ä½å¿…é¡»æ”¾åˆ°æ–‡ç« ä¸€å¼€å§‹å°±è¿›è¡Œæ„Ÿè°¢ï¼Œä¸èƒ½æ”¾åˆ°æœ€å

ç¬¬ä¸€ä½å‰è¾ˆï¼šæœ¬æ–‡æºä»£ç æ˜¯åœ¨**å»–å­å°§**å‰è¾ˆåšçš„å·¥ä½œåŸºç¡€ä¸Šè¿›è¡Œæ”¹è¿›çš„ï¼š

[å»–å­å°§çš„Github](https://github.com/jeasonlzy/NineGridView)

ç¬¬äºŒä½å‰è¾ˆï¼šè€Œå»–å­å°§åˆæ˜¯å‚è€ƒ**laobie**çš„ä»£ç è¿›è¡Œæ”¹è¿›çš„ï¼Œæ•…è€Œä¹Ÿå¾—æ„Ÿè°¢å‰å‰è¾ˆï¼š

[laobieçš„Github](https://github.com/laobie/NineGridImageView)

â€‹	æ‰€ä»¥è¿™ä¸ªæ¡†æ¶çš„å†å²å°±æ˜¯ä¸‹é¢è¿™ä¸ªæ ·å­ï¼š

ã€€ã€€**laobie **é¦–é€ è½®å­ 

ã€€ã€€ã€€ã€€===>  **å»–å­å°§** ä¼˜åŒ–è½®å­ 

ã€€ã€€ã€€ã€€ã€€ã€€===>  **Littlecurlï¼ˆæˆ‘ï¼‰** æ”¹é€ è½®å­  

ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€===> ------ æ¥ä¸‹æ¥çš„ç²¾å½©ç”±**ä½ **ä¹¦å†™ï¼ŒæœŸå¾…ä½ çš„åŠ å…¥...... ------

ç¬¬ä¸‰ä½å‰è¾ˆï¼š**Shuyu Guo**ï¼Œä¸€ä½Githubä¸Šçš„è¶…çº§å¤§ä½¬ã€‚æŒ‰è¯´æˆ‘ä»¬ä¸€ä¸ªä»“åº“æœ‰å‡ ç™¾ä¸ªstarå·²ç»éå¸¸äº†ä¸å¾—äº†ï¼Œè¿™ä½å¤§ä½¬çš„ä»“åº“staråŠ¨è¾„å°±ä¸Šä¸‡äº†ï¼Œé¡¶ç¤¼è†œæ‹œï¼

[Shuyu Guoçš„Github](https://github.com/CarGuo)



é—²è¯ä¸å¤šæ‰¯ï¼Œç›´æ¥è¿›å…¥æ­£æ–‡



## æ­£æ–‡

### ä¸€ã€é¡¹ç›®ä¸‹è½½ä¸æ‰“å¼€

å®ç°ä¸‹é¢ç‚¹å‡»å±•å¼€åŠŸèƒ½çš„HTMLæºç 

```html
<pre>
    <details>
    	<summary>ğŸ‘ˆç‚¹å‡»å±•å¼€ | è¿™äº›å†…å®¹å¯ä»¥ç•¥è¿‡ï¼Œæ•…è€ŒæŠ˜å èµ·æ¥äº†</summary>
    	åœ¨è¿™é‡Œå†™å…·ä½“æŠ˜å çš„å†…å®¹
    </details>
</pre>
```

<pre>
    <details>
    	<summary>ğŸ‘ˆç‚¹å‡»å±•å¼€ | è¿™äº›å†…å®¹å¯ä»¥ç•¥è¿‡ï¼Œæ•…è€ŒæŠ˜å èµ·æ¥äº†</summary>
é¦–å…ˆæˆ‘ä»¬ä»Githubä¸Šcloneæˆ–è€…ç›´æ¥ä¸‹è½½ä¸‹æ¥å‰è¾ˆçš„æºç ï¼Œç”¨ASæ‰“å¼€ï¼Œ
å¾ˆå¤šAndroidé¡¹ç›®ç”±äºå†å²ç‰ˆæœ¬ä¸å…¼å®¹åŸå› ï¼Œä¸‹è½½ä¸‹æ¥ç›´æ¥æ‰“å¼€åGradleä¼šæŠ¥é”™ï¼Œ
Gradleåœ¨è¿™ä¸ªæ—¶å€™ä»¿ä½›åœ¨ä¸Šæ¼”ä¸€æ®µå…«ä»™è¿‡æµ·ï¼ŒBugä»¬éƒ½å„æ˜¾ç¥é€šï¼Œæ–½å±•æµ‘èº«çš„æ‹›æ•°ã€‚
ä¸è¿‡ï¼Œå¦‚æœä½ è§å¾—å¤šäº†ï¼Œå…¶å®ä¹Ÿå°±æ˜¯é‚£å‡ ç§æƒ…å†µã€‚
è¯´ä¸€ä¸ªæœ€æœ€å¸¸è§çš„å§ï¼šASè½¬åŠå¤©ï¼Œæœ€åæŠ¥é”™timeoutï¼Œä¸‹è½½è¶…æ—¶
<b>åˆ†æå¦‚ä¸‹</b>
é€šå¸¸å’Œä¸¤ä¸ªæ–‡ä»¶æœ‰å…³ï¼š
ä¸€æ˜¯ä½äºProjectä¸‹çš„build.gradleä¸­é…ç½®çš„com.android.tools.buildç‰ˆæœ¬ä¸æœ¬åœ°çš„ä¸ä¸€è‡´ï¼Œ
è€Œä¸”åŒæ ·åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­é…ç½®çš„jaråŒ…ä¸‹è½½åœ°å€ä¸è¡Œï¼Œè§£å†³åŠæ³•å¾€ä¸‹çœ‹ğŸ‘‡ï¼›
äºŒæ˜¯gradle-wrapper.propertiesé‡Œé¢é…ç½®çš„distributionUrlç‰ˆæœ¬ä¸è¡Œï¼Œè§£å†³åŠæ³•å¾€ä¸‹çœ‹ğŸ‘‡ã€‚
<b>è§£å†³åŠæ³•</b>ï¼š
<b>ç¬¬ä¸€æ­¥</b>ï¼šæ–°å»ºä¸€ä¸ªç©ºé¡¹ç›®ï¼Œçœ‹çœ‹è‡ªå·±æœ¬åœ°èƒ½è·‘èµ·æ¥çš„é…ç½®æ˜¯å“ªä¸ªç‰ˆæœ¬çš„
æˆ‘ä»¬å¯ä»¥åœ¨æ–°å»ºçš„ç©ºé¡¹ç›®ä¸­ç‚¹å‡»File ==ã€‹ Project Struct... ï¼Œä¹Ÿå¯ä»¥æŒ‰å¿«æ·é”®Ctrl+Shift+Alt+Sï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º
<img src="image\1573992214487.png" height="500"/>
ç„¶åè®°ä½è¿™ä¸ªé¡¹ç›®çš„ä¸¤ä¸ªç‰ˆæœ¬å·ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º
ï¼ˆè¿™ä¸¤ä¸ªç‰ˆæœ¬å·å°±åˆ†åˆ«å¯¹åº”æˆ‘ä¸Šé¢è¯´çš„é‚£ä¸ªcom.android.tools.buildç‰ˆæœ¬ä¸gradle-wrapper.propertiesé‡Œçš„distributionUrlç‰ˆæœ¬ï¼‰
<img src="image\1573992259378.png" height="500"/>
å°†å¯¹åº”çš„ç‰ˆæœ¬å·ï¼Œä»¥åŒæ ·çš„æ“ä½œé…åˆ°ä½ åˆšåˆšä¸‹è½½ä¸‹æ¥çš„ï¼ŒæŠ¥é”™çš„é¡¹ç›®ä¸­ï¼ŒApplyåOK
<b>ç¬¬äºŒæ­¥</b>ï¼Œåœ¨Projectä¸‹çš„build.gradleä¸­é…ä¸Šå¸¸ç”¨çš„åœ°å€ï¼Œé˜²æ­¢å› ä¸º<b>å¤©æœå¢™</b>çš„åŸå› ï¼Œé€ æˆä¸€äº›ç½‘ç»œé—®é¢˜ï¼Œå¯¼è‡´ä¸€äº›ä¾èµ–ä¸‹è½½å¤±è´¥ï¼Œ
å…·ä½“é…ç½®çš„åœ°æ–¹å¦‚ä¸‹ï¼Œä¸Šä¸‹ä¸¤ä¸ªåœ°æ–¹éƒ½éœ€è¦é…ç½®
<img src="image\1573992043854.png" height="500"/>
<code>
// æ·»åŠ é˜¿é‡Œäº‘ maven åœ°å€
maven { url 'http://maven.aliyun.com/nexus/content/groups/public/' }
maven { url 'http://maven.aliyun.com/nexus/content/repositories/jcenter' }
google()
jcenter()
maven { url "https://jitpack.io" }
mavenCentral()
jcenter{url "http://jcenter.bintray.com/"}
</code>
åˆ«å¿˜äº†ç‚¹å³ä¸Šæ–¹çš„Syncè¿›è¡ŒåŒæ­¥
è¿˜æœ‰å¯èƒ½ä¼šå‡ºç°å…¶ä»–æƒ…å†µï¼Œé‚£å°±å…·ä½“è€Œå®šäº†ï¼Œå¤šç”¨æœç´¢å¼•æ“æœä¸€æœè§£å†³åŠæ³•ã€‚
</details>
</pre>

### äºŒã€æ¡†æ¶ç›®å½•

<pre>
<details>
<summary>ğŸ‘ˆç‚¹å‡»å±•å¼€ | è¿™äº›å†…å®¹ä¹Ÿå¯ä»¥ç•¥è¿‡ï¼Œæ•…è€ŒæŠ˜å èµ·æ¥äº†</summary>
<img src="image\1574087351451.png"/>
ä»å…¨å±€çœ‹ï¼Œæ€»å…±æœ‰ä¸‰å¤§å—å†…å®¹ã€‚
ç¬¬ä¸€å—æ˜¯éœ€è¦æˆ‘ä»¬è‡ªå·±å†™çš„ï¼›
ç¬¬äºŒå—æˆ‘æ•´åˆä¸‰ä½å‰è¾ˆçš„ä»£ç äº§å‡ºçš„ä¸€ä¸ªæ¡†æ¶ï¼›
ç¬¬ä¸‰å—æ˜¯Gradleï¼Œè™½ç„¶æœ‰æ—¶å€™å¾ˆéš¾ç”¨ï¼Œä½†æ˜¯Googleäº²å„¿å­ï¼Œä¸ç”¨å®ƒä¹Ÿæ²¡åˆ«çš„äº†ã€‚
<h4>ç¬¬ä¸€å—ä»£ç çš„ç›®å½•</h4>
<img src="image\partone.png" height="500"/>
é‡ç‚¹å…³æ³¨å›¾ä¸Šæ ‡æ³¨çš„å››ç‚¹
â‘ ï¼Œmanifestsä¸­çš„é…ç½®ä¸ç”¨è¯´å°±å¾ˆé‡è¦ã€‚
å› ä¸ºæ¶‰åŠåˆ°ç½‘ç»œåŠ è½½ï¼Œæˆ‘ä»¬éœ€è¦è¯·æ±‚ç½‘ç»œï¼Œæ‰€ä»¥è¦åŠ ä¸Šç½‘ç»œè¯·æ±‚æƒé™ã€‚
å¦å¤–ï¼ŒAndroid9.0ç³»ç»Ÿé»˜è®¤ä¸å…è®¸è®¿é—®httpç½‘ç»œï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜å¾—å•ç‹¬é…ç½®ä¸€ä¸‹ã€‚
åœ¨manifestsä¸­è¿˜é…ç½®äº†packageçš„å€¼ï¼Œä»£è¡¨åŒ…åã€‚è¿™é‡Œçš„é…ç½®å°±æ˜¯æˆ‘ä»¬ç»å¸¸è§çš„Rèµ„æºæ–‡ä»¶çš„å¼•ç”¨ã€‚
æœ€åä¸€ç‚¹ï¼Œæ¯ä¸ªéœ€è¦åŠ è½½çš„Activityå’ŒApplicationéƒ½éœ€è¦æ¥è¿™é‡Œé…ç½®ä¸€ä¸‹ã€‚
åŒ…åè§£é‡Šï¼š
<code>
package="cn.edu.heuet.littlecurl"
www.heuet.edu.cnæ˜¯æˆ‘ä»¬å­¦æ ¡çš„å®˜ç½‘åœ°å€ï¼Œlittlecurlï¼ˆå°å·æ¯›ï¼‰æ˜¯æˆ‘ä»¬ç­å¥³ç”Ÿç»™æˆ‘èµ·çš„å¤–å·ï¼Œè¦çŸ¥é“ï¼Œèµ·ä¸ªåå­—å°±å¾ˆéš¾äº†ï¼Œèµ·ä¸ªå¤–å›½åå­—æ›´æ˜¯éš¾ä¸ŠåŠ éš¾ï¼Œæ‰€ä»¥å¹²è„†å°±ç”¨å®ƒæ¥å½“åŒ…åäº†ã€‚
</code>
â‘¡ï¼ŒAppå’ŒLauncherActivityã€‚
Appç»§æ‰¿è‡ªApplicationã€‚ä¸€èˆ¬Applicationçš„ä½œç”¨å°±æ˜¯åœ¨Appå¯åŠ¨çš„æ—¶å€™ï¼ŒåŠ è½½é‚£äº›åªéœ€è¦åŠ è½½ä¸€æ¬¡çš„ä¸œè¥¿ï¼Œæ¯”å¦‚ï¼šå›¾ç‰‡åŠ è½½å™¨ã€‚è¯¥ç±»éœ€è¦åœ¨AndroidManifest.xmlæ–‡ä»¶ä¸­è¿›è¡Œé…ç½®ï¼Œandroid:name=".qzone.App"
LauncherActivityå°±æ˜¯æˆ‘ä»¬åœ¨Manifestæ–‡ä»¶ä¸­é…ç½®çš„å¯åŠ¨ç±»ï¼Œæ‰€æœ‰çš„ç•Œé¢éƒ½ä»è¿™é‡Œä½œä¸ºå…¥å£å¼€å§‹ã€‚
â‘¢ï¼Œä»LauncherActivityè·³è½¬åˆ°QZoneActivityï¼Œä»ç±»åå¯ä»¥çœ‹å‡ºï¼Œæ¨¡ä»¿çš„æ˜¯QQç©ºé—´ã€‚
â‘£ï¼Œå› ä¸ºQZoneActivityæ•´ä½“ç”¨çš„æ˜¯RecyclerViewï¼Œæ‰€ä»¥éœ€è¦ä¸€ä¸ªé€‚é…å™¨æ¥ç»‘å®šæ•°æ®ã€‚
<h4>ç¬¬äºŒå—ä»£ç çš„ç›®å½•</h4>
<img src="image/parttwo.png" height="500"/>
ä¸»è¦å…³æ³¨ä¸‹é¢è¿™å››å¤§éƒ¨åˆ†
â‘ ï¼ŒmanifeståŒä¸Šã€‚
â‘¡ï¼ŒbaseåŒ…ä¸‹æœ‰ä¸€ä¸ªé€‚é…å™¨ï¼Œè¿™ä¸ªé€‚é…å™¨æ˜¯æ•´ä¸ªNineGridViewæ¡†æ¶å¯¹å¤–æš´éœ²çš„å…¥å£ã€‚å¦‚æœæƒ³ä»…ä»…ä½¿ç”¨ä¹å®«æ ¼è¿™ä¸ªæ¡†æ¶ï¼Œä¼šç”¨è¿™ä¸ªé€‚é…å™¨å°±è¡Œäº†ï¼Œå…¶ä»–çš„éƒ½å¯ä»¥ä¸ç”¨ç®¡ã€‚
â‘¢ï¼ŒpreviewåŒ…ä¸‹çš„å†…å®¹å°±æ˜¯å‘ˆç°ä¹å®«æ ¼é¢„è§ˆå›¾çš„ç›¸å…³å†…å®¹ã€‚æ‰€è°“é¢„è§ˆå›¾å°±æ˜¯ä¹ä¸ªå°å›¾ç‰‡ã€‚
â‘£ï¼ŒdetailåŒ…ä¸‹çš„å†…å®¹å°±æ˜¯æˆ‘ä»¬ç‚¹å‡»ä¹å®«æ ¼çš„å…¶ä¸­ä¸€ä¸ªä¹‹åï¼Œå¦‚æœæ˜¯è§†é¢‘å°±åŠ è½½è§†é¢‘æ’­æ”¾å™¨ï¼Œå¦åˆ™åŠ è½½å¤§å›¾ã€‚
<h4>ç¬¬ä¸‰å—ä»£ç çš„ç›®å½•</h4>
<img src="image\1574088727753.png"/>
<div style="color:#F00">
<b>çº¢æ¡†æ¡†ï¼Œä»¥ .gradle ç»“å°¾çš„æ–‡ä»¶ã€‚</b>
</div>
æœ€ä¸Šé¢æ˜¯ä¸‰ä¸ªåŒå build.gradle ä¹Ÿä¸çŸ¥é“gradleçš„å¼€å‘è€…æ˜¯å’‹æƒ³çš„ï¼Œå°±ä¸èƒ½å«æˆProjectBuild.gradleå’ŒModuleBuild.gradleå—ï¼Ÿ
å¥½äº†ï¼Œä¸æŠ±æ€¨äº†ã€‚
ä¸‰ä¸ªæ–‡ä»¶ä»ä¸Šåˆ°ä¸‹ä¾æ¬¡æ˜¯ä¸€ä¸ªé¡¹ç›®çº§åˆ«çš„ï¼Œä¸¤ä¸ªæ¨¡å—çº§åˆ«çš„ã€‚
å…¶ä¸­ï¼Œæˆ‘ä»¬çš„é¡¹ç›®åç§°å«NineGridView-master,æˆ‘ä»¬è‡ªå·±å†™çš„æ¨¡å—å«appï¼Œ
å¼•ç”¨çš„ä¹å®«æ ¼æ¨¡å—å«ninegridviewï¼Œæˆ‘è¿™ä¸ªè¾“å…¥æ³•å¯¹è¿™ä¸ªè‹±æ–‡åå¥½åƒæœ‰ä»€ä¹ˆè‡ªå·±çš„æƒ³æ³•ğŸ‘‡ : )
<img src="image\1574088971183.png"/>
ä¸€èˆ¬æˆ‘ä»¬ä¼šåœ¨Projectçº§åˆ«çš„build.gradleé‡Œé¢é…ç½®ä¾èµ–çš„åœ°å€ï¼Œè€Œå…·ä½“çš„ä¾èµ–é…ç½®åˆ°å…·ä½“çš„Moduleçš„build.gradleä¸­ã€‚
ä¸‹é¢è¿˜æœ‰ä¸€ä¸ªsettings.gradle,è¿™é‡Œé¢æ˜¯æ¨¡å—å¼•ç”¨é…ç½®ï¼Œä¸€èˆ¬éƒ½æ˜¯ASè‡ªåŠ¨å¸®æˆ‘ä»¬ç”Ÿæˆï¼Œç»´æŠ¤çš„ã€‚
<div style="color:#FF0">
<b>é»„æ¡†æ¡†ï¼Œä»¥ .properties ç»“å°¾çš„æ–‡ä»¶ã€‚</b>
</div>
æœ€ä¸Šé¢é‚£ä¸ªï¼Œä»åé¢çš„æ‹¬å·ä¸­æˆ‘ä»¬èƒ½çœ‹å‡ºæ¥ï¼ŒGlobal Propertiesï¼Œ
è¯´æ˜ä»–æ˜¯ä¸€ç§å…¨å±€çš„å±æ€§é…ç½®æ–‡ä»¶ï¼Œé‡Œé¢é…çš„æ˜¯JVMæœ€å¤§å †çš„å¤§å°ï¼Œä¸€èˆ¬æˆ‘ä»¬ä¹Ÿä¸ç”¨ç®¡ã€‚
åœ¨å®ƒä¸‹é¢çš„gradle-wrapper.propertiesæ–‡ä»¶æˆ‘ä»¬å·²ç»åœ¨<b>é¡¹ç›®ä¸‹è½½ä¸æ‰“å¼€</b>é‚£é‡Œè§è¿‡äº†ï¼Œ
é‡Œé¢æœ€é‡è¦çš„ä¸€å¥å¦‚ä¸‹ï¼š
<code>
distributionUrl=https\://services.gradle.org/distributions/gradle-5.4.1-all.zip
</code>
å†å¾€ä¸‹æœ‰ä¸€ä¸ªProjectçº§åˆ«çš„propertiesï¼Œè¿™é‡Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå®šä¹‰jvmçš„æœ€å¤§å †ç­‰ä¿¡æ¯ï¼Œ
å½“ç„¶ï¼Œç°åœ¨é‡Œé¢å°±ä¸¤å¥
<code>
android.useAndroidX=true
android.enableJetifier=true
</code>
å¦‚æœæƒ³ä½¿ç”¨Androidxï¼Œè¿™ä¸¤å¥ä¸€å¥ä¹Ÿä¸èƒ½å°‘ã€‚
ï¼ˆ2018å¹´æ˜¯Androidåå‘¨å¹´ï¼ŒAndroidåŒ…å‘½åä¸€ç›´å¾ˆä¹±ï¼Œå¹²è„†åœ¨è¿™åå‘¨å¹´ä¹‹é™…ï¼Œ
æ¨å‡ºäº†Androidxï¼ˆåƒä¸åƒiPhoneXï¼‰ï¼Œæ¥ç»Ÿä¸€ä¾èµ–çš„åå­—ï¼Œé•¿ç—›ä¸å¦‚çŸ­ç—›ï¼ï¼‰ã€‚
æœ€ä¸‹é¢çš„ä¸€ä¸ªpropertiesæŒ‡æ˜äº†æˆ‘ä»¬æœ¬åœ°SDKçš„å®‰è£…ç›®å½•ã€‚ 
<div style="color:#3299cc">
<b>è“æ¡†æ¡†ï¼Œä»¥proç»“å°¾çš„æ–‡ä»¶ã€‚</b>
</div>
é‡Œé¢å•¥ä¹Ÿæ²¡æœ‰ï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“æœ‰å•¥ç”¨ ï¼šï¼‰
PSï¼šè‰²å…‰çš„ä¸‰åŸè‰²æ˜¯ï¼šçº¢ã€é»„ã€è“ï¼›é¢œè‰²çš„ä¸‰åŸè‰²æ˜¯ï¼šå“çº¢ï¼Œé»„ï¼Œé’ã€‚
</details>
</pre>

### ä¸‰ã€å…·ä½“ç±»çš„ä½œç”¨

### 0ã€RecyclerViewItem.java(JavaBeanï¼Œæ•°æ®å®¹å™¨)

â€‹		ä¸€ä¸ªitemå°±æ˜¯ä¸€æ¡æ§ä»¶åŠ¨æ€ï¼Œä¸‹å›¾å±•ç¤ºäº†ä¸¤æ¡åŠ¨æ€ï¼š

<img src="image\1573993820069.png" height="500" />

â€‹		RecyclerViewItemè¿™ä¸ªç±»å°±æ˜¯ç”¨äºæ¥æ”¶åå°æ•°æ®çš„JavaBeanï¼Œæ³¨æ„ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ª`ArrayList<MyMedia>`ï¼Œè¿™é‡Œçš„MyMedia.javaæ˜¯ç»™ä¹å®«æ ¼é€‚é…å™¨ä¼ é€’çš„æ•°æ®ã€‚å› ä¸ºå…¶ä»–æ•°æ®åªæ˜¯å•çº¯çš„UIæ§ä»¶å¯¹æ•°æ®è¿›è¡Œç»‘å®šï¼Œè€Œä¹å®«æ ¼ä¸­çš„å›¾ç‰‡æ˜¯å¯ä»¥ç‚¹å‡»æŸ¥çœ‹å¤§å›¾æˆ–è§†é¢‘è¯¦æƒ…çš„ï¼Œæ—¢éœ€è¦**å›¾ç‰‡**åœ°å€åˆéœ€è¦**è§†é¢‘**åœ°å€ï¼Œæ¦‚æ‹¬ä¸€ä¸‹å°±æ˜¯**åª’ä½“**æ•°æ®ï¼Œæœ¬æ¥åº”è¯¥å«Mediaï¼Œä½†æ˜¯Androidçš„SDKä¸­å·²ç»å­˜è¿™ä¸ªç±»åï¼Œæ‰€ä»¥å°±å«æˆäº†MyMediaï¼Œå¦å¤–å› ä¸ºéœ€è¦å¤šæ¡æ•°æ®ï¼ˆä¹å®«æ ¼å˜›ï¼Œè‚¯å®šå¤šæ¡æ•°æ®ï¼‰ï¼Œæ‰€ä»¥å°±æ˜¯`ArrayList<MyMedia>`ï¼Œè€ŒMyMedia.javaçš„å†…å®¹ä¹Ÿéå¸¸ç®€å•

```java
public class MyMedia implements Serializable {
    private String imageUrl;
    private String videoUrl;

    // ä»¥ä¸‹çœç•¥æ„é€ æ–¹æ³•å’ŒGetterã€Setter
}
```

â€‹		è¿™æ ·æˆ‘æƒ³ä½ å°±èƒ½ç†è§£RecyclerViewItem.javaä¸­çš„å†…å®¹äº†

```java
public class RecyclerViewItem implements Serializable {
    private String content;ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€// è¯„è®ºå†…å®¹
    private String createTime;ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€// è¯„è®ºæ—¶é—´
    private String channelId;ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€// é¢‘é“idï¼ˆæˆ‘ä¹Ÿä¸çŸ¥é“è¿™æ˜¯å•¥ï¼‰
    private String nickName;ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€// è¯„è®ºäººæ˜µç§°
    private Location location;ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€// è¯„è®ºäººä½ç½®ï¼ˆç»çº¬åº¦ï¼‰
    private String headImageUrl;ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€// å¤´åƒurl
    private ArrayList<MyMedia>  mediaList;ã€€ã€€ã€€// ä¹å®«æ ¼æ•°æ®ï¼ˆå›¾ç‰‡å’Œè§†é¢‘ï¼‰

ã€€ã€€// ä»¥ä¸‹çœç•¥æ„é€ æ–¹æ³•å’ŒGetterã€Setter
}
```

â€‹		å…¶å®è½¯ä»¶å·¥ç¨‹è§„èŒƒçš„å¼€å‘æµç¨‹å°±æ˜¯è¿™æ ·çš„ï¼Œå…ˆæœ‰è®¾è®¡å›¾ï¼Œç„¶åå†é’ˆå¯¹è®¾è®¡å›¾è¿›è¡Œè®¾è®¡æ•°æ®ç»“æ„ã€‚

ä»€ä¹ˆæ—¶å€™ä½ èƒ½è¾¾åˆ°çœ‹ç€è®¾è®¡å›¾å°±èƒ½æƒ³åˆ°å¯¹åº”çš„JavaBeanç»“æ„ï¼Œé‚£ä¹ˆæˆ‘æƒ³ï¼Œä¸€èˆ¬çš„Appå¼€å‘ä»»åŠ¡ä½ å°±å¯ä»¥èƒœä»»äº†ã€‚

JavaBeanå°±ç›¸å½“äºä¸€ä¸ªæ¥æ”¶æ•°æ®çš„å®¹å™¨ï¼Œç°åœ¨å®¹å™¨æœ‰äº†ï¼Œæˆ‘ä»¬éœ€è¦å»è·å–æ•°æ®äº†ã€‚

### 1ã€QZoneActivity.javaï¼ˆè·å–ç½‘ç»œæ•°æ®ï¼‰

â€‹		Activityå’ŒFragmentæ˜¯Androidä¸­ä¸¤ç±»UIæ§åˆ¶å™¨ï¼ŒMVCæ¶æ„ä¸­çš„Cå±‚ï¼ŒMVPæ¶æ„ä¸­çš„På±‚ã€‚

â€‹		è·å–åå°æ•°æ®çš„æ–¹æ³•ï¼šOkhttpè¯·æ±‚ç½‘ç»œ + Jsonè§£æï¼Œè¯¦æƒ…ä¸æ˜¯æœ¬æ¬¡çš„é‡ç‚¹ï¼Œæˆ‘å°±ä¸å¤šè¯´äº†ï¼Œä½ éƒ½ä¼šäº†ã€‚ ï¼š)

â€‹		å› ä¸ºæˆ‘æ²¡æœ‰åå°ï¼Œæ‰€ä»¥æ•°æ®æ˜¯æˆ‘æ‰‹åŠ¨è®¾ç½®ã€‚

<pre>
    <details>
    	<summary>ğŸ‘ˆç‚¹å‡»å±•å¼€ | è¿™äº›å†…å®¹å¯ä»¥ç•¥è¿‡ï¼Œæ•…è€ŒæŠ˜å èµ·æ¥äº†</summary>
// è‡ªå®šä¹‰çš„æµ‹è¯•æ•°æ®ï¼ˆå‡è£…è¿™æ˜¯ç½‘ç»œè¯·æ±‚å¹¶è§£æåçš„æ•°æ®ï¼‰
private void loadMyTestDate(){
    // å…ˆæ„é€ MyMedia
    String imgUrl1 = "http://i2.tiimg.com/702441/6e3d61b352409f34.png";
    String imgUrl2 = "http://i2.tiimg.com/702441/ca8092e87a2f2b30.jpg";
    String imgUrl3 = "http://i2.tiimg.com/702441/081b443af609c94c.png";
    String videoUrl = "http://jzvd.nathen.cn/c6e3dc12a1154626b3476d9bf3bd7266/6b56c5f0dc31428083757a45764763b0-5287d2089db37e62345123a1be272f8b.mp4";
    MyMedia myMedia1 = new MyMedia(imgUrl1,videoUrl);
    MyMedia myMedia2 = new MyMedia(imgUrl2);
    MyMedia myMedia3 = new MyMedia(imgUrl3);
    // å†æ„é€ mediaList
    ArrayList<MyMedia> mediaList = new ArrayList<>();
    for (int i = 0; i < 3; i++) { // åŠ å…¥9å¼ å›¾ç‰‡
        mediaList.add(myMedia1);
        mediaList.add(myMedia2);
        mediaList.add(myMedia3);
    }
    Location location = new Location();
    location.setAddress("Test Address");
     // æœ€åæ„é€ RecyclerViewItem
    final RecyclerViewItem RecyclerViewItem1 = new RecyclerViewItem(mediaList, "æ²³åŒ—ç»è´¸å¤§å­¦...", 
    "2019-11-02","10080", "è‡ªå¼ºç¤¾", location, imgUrl1);
    final RecyclerViewItem RecyclerViewItem2 = new RecyclerViewItem(mediaList, "æ²³åŒ—ç»è´¸å¤§å­¦...", 
    "2019-11-02","10080", "ä¿¡æ¯æŠ€æœ¯å­¦é™¢", location, imgUrl2);
    final RecyclerViewItem RecyclerViewItem3 = new RecyclerViewItem(mediaList, "æ²³åŒ—ç»è´¸å¤§å­¦...", 
    "2019-11-02","10080", "é›·é›¨è¯å‰§ç¤¾", location, imgUrl3);
    RecyclerViewItemList.add(RecyclerViewItem1);
    RecyclerViewItemList.add(RecyclerViewItem2);
    RecyclerViewItemList.add(RecyclerViewItem3);
}
    </details>
</pre>

é€šè¿‡QZoneActivityæˆ‘ä»¬å¯ä»¥æ‹¿åˆ°æ‰€æœ‰éœ€è¦å±•ç¤ºçš„æ•°æ®ï¼Œä½†è¿™ä»…ä»…æ˜¯æ•°æ®ï¼Œæˆ‘ä»¬éœ€è¦æŠŠæ•°æ®å’Œå…·ä½“çš„UIæ§ä»¶è¿›è¡Œç»‘å®šã€‚

å¦‚æœè¯´æ˜¯å•çº¯çš„ä¸€ä¸ªImageViewè¿›è¡Œæ•°æ®ç»‘å®šï¼Œé‚£ä¹ˆå®Œå…¨å¯ä»¥å°±åœ¨ QZoneActivity ä¸­è¿›è¡Œï¼Œæ¯”å¦‚æˆ‘ä»¬é€šè¿‡Glideæ¡†æ¶ï¼Œå¾ˆæ–¹ä¾¿çš„**ä¸€è¡Œä»£ç **å°±èƒ½ç»‘å®šå›¾ç‰‡urlåˆ°ImageViewä¸­

#### 1.1 Glideæ¡†æ¶çš„ç®€å•ä½¿ç”¨

```java
// ä½¿ç”¨å‰è®°å¾—å…ˆæ·»åŠ dependency
Context context = getApplicationContext();
String url = "å›¾ç‰‡url";
ImageView imageView = findViewById(R.id.iv);

Glide.with(context).load(url).into(imageView); // ä¸€è¡Œä»£ç æŒ‡çš„æ˜¯è¿™ä¸€è¡Œ
```

â€‹		ä½†æ˜¯ï¼Œæˆ‘ä»¬è¦å‘ˆç°çš„ç•Œé¢å¯ä¸ä»…ä»…åªæœ‰ä¸€å¼ å›¾ç‰‡ã€‚

â€‹		æˆ‘ä»¬è¦å‘ˆç°çš„æ˜¯ä¸€ä¸ªå¯ä»¥æ»‘åŠ¨çš„RecyclerViewæˆ–è€…ListViewï¼Œå› ä¸ºè¿™ä¸¤ä¸ªæ§ä»¶ä¸€èˆ¬éœ€è¦æŠŠå¾ˆå¤šUIæ§ä»¶å’Œå¾ˆå¤šæ•°æ®è¿›è¡Œç»‘å®šï¼Œå¦‚æœå…¨éƒ½å†™åœ¨ä¸€ä¸ªç±»é‡Œé¢ï¼Œä¸€æ˜¯ç±»æ˜¾å¾—è¿‡äºè‡ƒè‚¿ï¼Œä¸å¥½ç†è§£ï¼›äºŒæ˜¯ä»£ç å¤ªå¯†é›†ï¼Œä¸ä¾¿å¿«é€Ÿå®šä½é—®é¢˜ï¼›ä¸‰æ˜¯ä»£ç è€¦åˆåº¦å¤ªé«˜ï¼Œä¸ç¬¦åˆä¼˜ç§€çš„ç¼–ç¨‹æ€æƒ³ï¼ˆè¿™ä¹Ÿæ˜¯äº§ç”Ÿå‰é¢ä¸¤ä¸ªé—®é¢˜çš„ç»ˆæåŸå› ï¼‰ã€‚

â€‹		æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦æŠŠæ•°æ®è·å–å’Œæ•°æ®ç»‘å®šè¿›è¡Œåˆ†ç¦»ï¼Œè¿™å°±ç”¨åˆ°äº†é€‚é…å™¨æ¨¡å¼ã€‚

#### 1.2 é€‚é…å™¨æ€æƒ³

åŸå…ˆä»£ç é€»è¾‘æ˜¯ï¼šActivityä»XMLå¸ƒå±€æ–‡ä»¶ä¸­è·å–UIæ§ä»¶å¯¹è±¡ï¼ŒåŒæ—¶Activityä¹Ÿä»ç½‘ç»œä¸Šè·å–æ•°æ®ï¼Œç„¶ååœ¨Activityä¸­å°†äºŒè€…è¿›è¡Œç»‘å®šã€‚

<img src="image\1573996205651.png"/>

å¼•å…¥é€‚é…å™¨ä¹‹åï¼šActivityåªè´Ÿè´£è·å–ç½‘ç»œæ•°æ®ï¼Œæ‹¿åˆ°ä¹‹åä¼ é€’ç»™é€‚é…å™¨ã€‚é€‚é…å™¨å†ä»XMLå¸ƒå±€æ–‡ä»¶ä¸­æ‹¿åˆ°UIæ§ä»¶ï¼Œå°†äºŒè€…è¿›è¡Œç»‘å®šã€‚é€šè¿‡å¼•å…¥é€‚é…å™¨ï¼Œæ•°æ®è·å–ä¸æ•°æ®ç»‘å®šå°±è§£è€¦åˆäº†ã€‚

<img src="image\1573996347984.png"/>

â€‹		åŸå…ˆçš„Activityæ—¢éœ€è¦è·å–æ•°æ®ï¼Œåˆéœ€è¦ç»‘å®šæ•°æ®ã€‚é€‚é…å™¨çš„å‡ºç°å¸®ä»–åˆ†ç¦»äº†ç»‘å®šæ•°æ®çš„ä»£ç ï¼Œè®©Activityåªåšå¥½è·å–æ•°æ®ä¸€ä»¶äº‹å°±è¡Œï¼Œæ‹¿åˆ°æ•°æ®ä¹‹åï¼Œä¼ ç»™é€‚é…å™¨å°±è¡Œã€‚è¿™å°±æ˜¯æ‰€è°“çš„è§£è€¦åˆã€‚

â€‹		è¿™æ ·æ›´é€‚åˆäº’è”ç½‘å…¬å¸å¤šäººååŒå¼€å‘ï¼Œä¸€äº›äººåªç®¡å†™å¸ƒå±€æ–‡ä»¶ï¼Œä¸€äº›äººåªç®¡å†™é€‚é…å™¨ï¼Œä¸€äº›äººåªç®¡å†™Activityã€‚å¦‚æœé…åˆå¾—å½“ï¼Œæ•ˆç‡è‚¯å®šæ˜¯æ¯”åŸå…ˆçš„å¿«ï¼Œè¿™æ ·å°±èƒ½æ›´å¿«çš„ä¸Šçº¿Appäº§å“ï¼Œæ›´å¿«çš„æŠ¢å å¸‚åœºï¼Œæ›´å¿«çš„è·å–åˆ©æ¶¦ï¼Œæ›´å¿«çš„æˆä¸ºäººç”Ÿèµ¢å®¶ï¼Œæ›´å¿«çš„è¿å¨¶ç™½å¯Œç¾ï¼Œæ›´å¿«çš„ä¸ºç¤¾ä¼šä¸»ä¹‰ç°ä»£åŒ–å»ºè®¾åšè´¡çŒ®ï¼Œæ›´å¿«çš„å®ç°å…±äº§ä¸»ä¹‰ï¼Œæ›´å¿«çš„......

â€‹		ï¼ˆå–‚ãƒ½(â—-`Ğ”Â´-)ãƒï¼Œé†’é†’ï¼Œé†’é†’......å¤§éƒï¼Œè¯¥å–è¯äº†ï¼ï¼‰ <img src="image/yiwen.png"/>

### 2ã€RecyclerViewItemAdapter.java

â€‹		åˆšæ‰æˆ‘ä»¬è¯´çš„æ˜¯QZoneActivity.javaä¸­çš„ä»£ç ï¼Œå®ƒè·å–åˆ°ç½‘ç»œæ•°æ®ä¹‹åï¼ˆå…¶å®æ˜¯æˆ‘æ‰‹å†™çš„æµ‹è¯•æ•°æ®ï¼‰ï¼Œå°±å°†æ•°æ®ä»¥Listçš„æ–¹å¼ä¼ é€’ç»™äº†é€‚é…å™¨ï¼Œè¿™ä¸ªé€‚é…å™¨å°±æ˜¯RecyclerViewItemAdapterã€‚å…ˆå‡è®¾é€‚é…å™¨å·²ç»å®Œæˆäº†æ•°æ®ç»‘å®šçš„å·¥ä½œï¼ˆä¸å»çœ‹é‡Œé¢å…·ä½“çš„ä»£ç ï¼‰ï¼Œä¸€æ—¦æ•°æ®ç»‘å®šå®Œæˆï¼Œæˆ‘ä»¬å°±å¯ä»¥å°†é€‚é…å™¨è®¾ç½®ç»™RecyclerView / ListViewå¯¹è±¡è®©å®ƒå»è¿›è¡Œæ¸²æŸ“å±•ç¤ºï¼Œè¿™å°±æ˜¯Androidä½¿ç”¨RecyclerView / ListViewè¿›è¡Œæ•°æ®å±•ç¤ºçš„æ•´ä½“é€»è¾‘ã€‚

#### 2.1 Activity+RecyclerView+Adapterå°ç»“

â€‹		1. **Activity**ä¸­è·å–ç½‘ç»œæ•°æ®

â€‹		2. **Activity**ä¸­å°†ç½‘ç»œæ•°æ®ä¼ é€’ç»™é€‚é…å™¨*Adapter*

â€‹		3. *Adapter*ä¸­è·å–UIæ§ä»¶

â€‹		4. *Adapter*ä¸­å°†æ•°æ®ç»‘å®šåˆ°å¯¹åº”çš„UIæ§ä»¶ä¸Š

â€‹		5. **Activity**ä¸­è·å–RecyclerView / ListViewå¯¹è±¡å¹¶è®¾ç½®å†™å¥½çš„é€‚é…å™¨

Adapterä¸­çš„ä»£ç ç»†èŠ‚å°±ä¸è¿‡å¤šè®²äº†ï¼Œå¤©ä¸‹æ‰€æœ‰çš„é€‚é…å™¨ä»£ç é€»è¾‘å¤§éƒ½ä¸€ä¸ªæ ·å­ï¼Œå¦‚æœä¸ä¼šå†™å°±å»ç½‘ä¸Šæ‰¾ä¸€ä¸ªæ¥æ¨¡ä»¿ï¼Œä¹Ÿå¯ä»¥çœ‹æˆ‘ä¸‹é¢ç»™å‡ºçš„ä»£ç ï¼Œæ¨¡ä»¿ä¸€éä¸è¡Œå†™ä¸‰éï¼Œå¤šå†™å‡ éå°±ä¼šäº†ã€‚

<pre>
    <details>
    	<summary>ğŸ‘ˆç‚¹å‡»å±•å¼€ | è¿™äº›å†…å®¹å¯ä»¥ç•¥è¿‡ï¼Œæ•…è€ŒæŠ˜å èµ·æ¥äº†</summary>
public class RecyclerVidewAdapter extends RecyclerView.Adapter<RecyclerVidewAdapter.ViewHolder> {
    private Context context;
    private List<RecyclerViewItem> recyclerViewItemList;
    public RecyclerVidewAdapter() {
    }
    /**
     * 1ã€æ¥æ”¶å¤–éƒ¨ä¼ æ¥çš„æ•°æ®
     */
    public RecyclerVidewAdapter(Context context, List<RecyclerViewItem> recyclerViewItemList) {
        this.context = context;
        this.recyclerViewItemList = recyclerViewItemList;
    }
    /**
     * 2ã€å¡«å……å¸ƒå±€
     */
    @NonNull
    @Override
    public RecyclerVidewAdapter.ViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {
        View view = LayoutInflater.from(context).inflate(R.layout.item_recyclerview, parent, false);
        return new ViewHolder(view);
    }
    /**
     * 3ã€å£°æ˜å¹¶åˆå§‹åŒ–å¸ƒå±€ä¸­çš„æ§ä»¶
     */
    public class ViewHolder extends RecyclerView.ViewHolder {
        private final ImageView avatar;
        private final TextView tv_username;
        private final TextView tv_createTime;
        private final TextView tv_content;
        private final NineGridViewGroup nineGridViewGroup;
        private final TextView tv_location;
        private final ImageView iv_detail_triangle;
        private final ImageView iv_eye;
        private final ImageView iv_share;
        public ViewHolder(@NonNull View itemView) {
            super(itemView);
            // å¤´åƒ
            avatar = itemView.findViewById(R.id.avatar);
            // ç”¨æˆ·å
            tv_username = itemView.findViewById(R.id.tv_username);
            // åˆ›å»ºæ—¶é—´
            tv_createTime = itemView.findViewById(R.id.tv_createTime);
            // å†…å®¹
            tv_content = itemView.findViewById(R.id.tv_content);
            // å›¾ç‰‡ä¹å®«æ ¼æ§ä»¶
            nineGridViewGroup = itemView.findViewById(R.id.nineGrid);
            // ä½ç½®
            tv_location = itemView.findViewById(R.id.tv_location);
            // ä½ç½®è¯¦æƒ…ä¸‰è§’å°å›¾æ ‡
            iv_detail_triangle = itemView.findViewById(R.id.iv_detail_triangle);
            // å›´è§‚çœ¼ç›å°å›¾æ ‡
            iv_eye = itemView.findViewById(R.id.iv_eye);
            // åˆ†äº«å°å›¾æ ‡
            iv_share = itemView.findViewById(R.id.iv_share);
        }
    }
    /**
     * 4ã€æ§ä»¶ä¸Šç»‘å®šæ•°æ®
     */
    @Override
    public void onBindViewHolder(@NonNull RecyclerVidewAdapter.ViewHolder holder, int position) {
        // è·å–å¯¹åº”çš„æ•°æ®
        RecyclerViewItem recyclerViewItem = recyclerViewItemList.get(position);
        // å¾€æ§ä»¶ä¸Šç»‘å®šæ•°æ®
        setImage(context, holder.avatar, recyclerViewItem.getHeadImageUrl());
        holder.tv_username.setText(recyclerViewItem.getNickName());
        holder.tv_createTime.setText(recyclerViewItem.getCreateTime());
        holder.tv_content.setText(recyclerViewItem.getContent());
        holder.tv_location.setText(recyclerViewItem.getLocation().getAddress());
        holder.iv_detail_triangle.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                Toast.makeText(context, "ä½ç½®è¯¦æƒ…å›¾æ ‡ç‚¹å‡»äº‹ä»¶è¿˜æœªå¼€å‘", Toast.LENGTH_SHORT).show();
            }
        });
        holder.iv_eye.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                Toast.makeText(context, "å›´è§‚å›¾æ ‡ç‚¹å‡»äº‹ä»¶è¿˜æœªå¼€å‘", Toast.LENGTH_SHORT).show();
            }
        });
        holder.iv_share.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                Toast.makeText(context, "åˆ†äº«å›¾æ ‡ç‚¹å‡»äº‹ä»¶è¿˜æœªå¼€å‘", Toast.LENGTH_SHORT).show();
            }
        });
        // ä¸ºæ»¡è¶³ä¹å®«æ ¼é€‚é…å™¨æ•°æ®è¦æ±‚ï¼Œéœ€è¦æ„é€ å¯¹åº”çš„List
        ArrayList<MyMedia> mediaList = recyclerViewItem.getMediaList();
        ArrayList<NineGridItem> nineGridItemList = new ArrayList<>();
        for (MyMedia myMedia : mediaList) {
            String thumbnailUrl = myMedia.getImageUrl();
            String bigImageUrl = thumbnailUrl;
            String videoUrl = myMedia.getVideoUrl();
            nineGridItemList.add(new NineGridItem(thumbnailUrl, bigImageUrl, videoUrl));
        }
        NineGridViewAdapter nineGridViewAdapter = new NineGridViewAdapter(nineGridItemList);
        holder.nineGridViewGroup.setAdapter(nineGridViewAdapter);
    }
    // 5ã€è¿”å›Itemä¸ªæ•°
    @Override
    public int getItemCount() {
        return recyclerViewItemList.size();
    }
    // é€šè¿‡å›¾ç‰‡çš„Urlç»™ImageViewæ§ä»¶è®¾ç½®å¯¹åº”çš„å›¾ç‰‡
    private void setImage(Context context, ImageView imageView, String url) {
        Glide.with(context)
                .load(url)
                .placeholder(R.drawable.ic_default_color)
                .error(R.drawable.ic_default_color)
                .diskCacheStrategy(DiskCacheStrategy.ALL)
                .into(imageView);
    }
}
    </details>
</pre>

åœ¨ä¸Šé¢æŠ˜å çš„ä»£ç ä¸­ï¼Œæˆ‘æœ‰æ ‡è®°å¥½æ–¹æ³•çš„é¡ºåºï¼Œè™½ç„¶ä¸€ä¸ªç±»ä¸­ï¼Œæ–¹æ³•çš„é¡ºåºå’ŒåŠŸèƒ½çš„å®ç°æ²¡æœ‰è”ç³»ã€‚ä½†æ˜¯æˆ‘æ¨èä½ åƒæˆ‘ä¸€æ ·ï¼ŒæŠŠæ–¹æ³•éƒ½æŒ‰ç…§è¿™ä¸ªé¡ºåºæ¥æ”¾ç½®ï¼Œå› ä¸ºè¿™æ ·æ›´ç¬¦åˆé€»è¾‘ï¼š

1ã€é€‚é…å™¨çš„æ„é€ æ–¹æ³•ï¼Œæ¥æ”¶å¤–éƒ¨ä¼ æ¥çš„æ•°æ®

2ã€å¡«å……å¸ƒå±€ï¼ŒonCreateViewHolder()

3ã€å£°æ˜å¹¶åˆå§‹åŒ–å¸ƒå±€ä¸­çš„æ§ä»¶ï¼ŒViewHolderç±»

4ã€æ§ä»¶ä¸Šç»‘å®šæ•°æ®ï¼ŒonBindViewHolder()

5ã€è¿”å›Itemçš„ä¸ªæ•°ï¼ŒgetItemCount()



### **---- ğŸ‘†ä¸Šé¢çš„ä»£ç éƒ½æ˜¯åœ¨æˆ‘ä»¬è‡ªå·±å»ºçš„Projecté‡Œ ---**

### **--- ğŸ‘‡ä¸‹é¢çš„ä»£ç éƒ½æ˜¯åœ¨NineGridViewæ¡†æ¶çš„æºç é‡Œ ---**




### 3ã€NineGridItem.java

è¿™ä¸ªç±»æ˜¯ä¹å®«æ ¼é€‚é…å™¨æ¥æ”¶æ•°æ®çš„æ ¼å¼ï¼Œä¸çŸ¥é“ä½ å‘ç°è§„å¾‹äº†æ²¡æœ‰ï¼Œæˆ‘æ¯æ¬¡éƒ½æ˜¯å…ˆä»JavaBeanå¼€å§‹è¯´èµ·ã€‚

è¿™ä¸ªJavaBeanåŸå…ˆå«ImageInfoï¼Œå› ä¸ºæ—¢è¦æ‰¿è½½ Image åˆè¦æ‰¿è½½ Videoï¼Œå°†æ¥è¿˜æœ‰å¯èƒ½æ‰¿è½½ Voiceæ¦‚æ‹¬ä¸€ä¸‹å°±æ˜¯åª’ä½“ä¿¡æ¯Mediaï¼Œåˆå› ä¸ºå®ƒæ‰¿è½½çš„æ˜¯ä¹å®«æ ¼ä¸­çš„ä¸€æ ¼å†…å®¹ï¼Œå±äºä¸€ä¸ªitemï¼Œæ‰€ä»¥å°±å«æˆäº† NineGridItem

ä»£ç ä¹Ÿå¾ˆç®€å•

```java
public class NineGridItem implements Serializable {
    public String thumbnailUrl;
    public String bigImageUrl;
    public int imageViewHeight;
    public int imageViewWidth;
    public int imageViewX;
    public int imageViewY;

    public String videoUrl;

    // çœç•¥æ„é€ æ–¹æ³•å’ŒSetterã€Getter
}
```



### 4ã€NineGridViewAdapter.java

è¿™ä¸ªç±»å¯¹å¤–æš´éœ²

å¤–éƒ¨ä½¿ç”¨æ–¹å¼å°±æ˜¯ä¼ è¿‡æ¥ä¸€ä¸ªContextï¼Œä¸€ä¸ªNineGridItemæ³›å‹çš„Listã€‚

å†å›å¤´çœ‹è¿™ä¸ªç±»çš„ä¸»è¦ä»£ç ï¼Œå°±æ˜¯ä¸€ä¸ªé‡å†™å“åº”Clickäº‹ä»¶çš„æ–¹æ³•ï¼Œå¦‚æœä»¥æ¦‚æ‹¬çš„çœ¼å…‰çœ‹è¿™ä¸ªæ–¹æ³•çš„è¯ï¼Œå…¶å®åªæœ‰ä¸¤éƒ¨åˆ†ä»£ç 

å¦‚ä¸‹ï¼š

```java
@Override
public void onNineGridItemClick(Context context, NineGridViewGroup nineGridViewGroup,
                             int index, List<NineGridItem> NineGridItemList) {
    // ç¬¬ä¸€éƒ¨åˆ†ï¼Œè®¡ç®—æ¯å¼ å›¾ç‰‡çš„å®½é«˜ã€èµ·å§‹ä½ç½®
    for (int i = 0; i < NineGridItemList.size(); i++) {
        NineGridItem NineGridItem = NineGridItemList.get(i);
        View view;
        if (i < nineGridViewGroup.getMaxSize()) {
            view = nineGridViewGroup.getChildAt(i);
        } else {
            view = nineGridViewGroup.getChildAt(nineGridViewGroup.getMaxSize() - 1);
        }
        NineGridItem.imageViewWidth = view.getWidth();
        NineGridItem.imageViewHeight = view.getHeight();
        int[] points = new int[2];
        view.getLocationInWindow(points);
        NineGridItem.imageViewX = points[0];
        NineGridItem.imageViewY = points[1];
    }
	// ç¬¬äºŒéƒ¨åˆ†ï¼Œå°†å¸¦å®½ã€é«˜ã€èµ·å§‹ä½ç½®ä¿¡æ¯çš„å›¾ç‰‡ä¼ é€’ç»™NineGridItemDetailActivity
    Intent intent = new Intent(context, NineGridItemDetailActivity.class);
    Bundle bundle = new Bundle();
    bundle.putSerializable(NineGridItemDetailActivity.MEDIA_INFO, (Serializable) NineGridItemList);
    bundle.putInt(NineGridItemDetailActivity.CURRENT_ITEM, index);
    intent.putExtras(bundle);
    context.startActivity(intent);
    ((Activity) context).overridePendingTransition(0, 0);
}
```

#### ç¬¬ä¸€éƒ¨åˆ†ï¼Œè®¡ç®—æ¯å¼ å›¾ç‰‡çš„å®½é«˜ã€èµ·å§‹ä½ç½®

æˆ‘ä»¬ä»åç«¯è·å–åˆ°çš„åªæ˜¯å›¾ç‰‡çš„URLåœ°å€ï¼Œå¹¶æ²¡æœ‰å›¾ç‰‡ç›¸å…³çš„å®½ã€é«˜ã€‚å›¾ç‰‡æ˜¾ç¤ºå¤šå®½å¤šé«˜æ˜¯æˆ‘ä»¬æ ¹æ®è‡ªå®šä¹‰çš„NineGridViewæ¥è®¡ç®—çš„ã€‚

å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦éå†ä¸€ä¸‹ä¼ è¿‡æ¥çš„NineGridItemListä¸­çš„æ¯ä¸ªNineGridItemï¼Œç»™ä»–è®¾ç½®ä¸€ä¸ªå®½ã€é«˜ã€èµ·å§‹åæ ‡ç‚¹ã€‚

#### ç¬¬äºŒéƒ¨åˆ†ï¼Œå°†å¸¦å®½ã€é«˜ã€èµ·å§‹ä½ç½®ä¿¡æ¯çš„å›¾ç‰‡ä¼ é€’ç»™NineGridItemDetailActivity

è¿™é‡Œæ³¨æ„ä¸¤ç‚¹

â‘  ä¼ é€’è‡ªå®šä¹‰æ³›å‹çš„ListViewæ—¶éœ€è¦ä½¿ç”¨putSerializable()æ–¹æ³•ï¼Œè€Œä¸”ListViewä¸­çš„å­ç±»å¿…é¡»éƒ½å®ç°åºåˆ—åŒ–æ–¹æ³•ï¼Œå³ implements Serializableï¼Œå¦åˆ™Intentåœ¨è¿›è¡Œè·³è½¬çš„æ—¶å€™ä¼šæŠ¥é”™ã€‚

â‘¡ overridePendingTransition(0,0)çš„ä½œç”¨æ˜¯å»æ‰Activityåˆ‡æ¢ä¹‹é—´çš„åŠ¨ç”»ã€‚

æ›´å¤šç”¨æ³•å¯ä»¥å‚è€ƒ ç®€ä¹¦  [å§œåº·](https://www.jianshu.com/u/2c22c64b9aff) [ã€ŠoverridePendingTransition çš„ä½¿ç”¨ã€‹](https://www.jianshu.com/p/c19e607f08aa)

#### å°ç»“ï¼šNineGridViewAdapterçš„ä½œç”¨

â‘  æä¾›æ•´ä¸ªæ¡†æ¶å¯¹å¤–æš´éœ²çš„æ¥å£

â‘¡ é¢„å¤„ç†å¤–éƒ¨ä¼ è¿‡æ¥çš„æ•°æ®ï¼Œç»™æ¯ä¸ªå›¾ç‰‡è®¾ç½®å›ºå®šçš„ä¹å®«æ ¼å®½é«˜

â‘¢ å¦‚æœç°åœ¨è¿˜ä¸èƒ½ç†è§£è‡ªå®šä¹‰Viewï¼Œæ²¡æœ‰å…³ç³»ï¼Œç»§ç»­å¾€ä¸‹çœ‹

### 5ã€NineGridItemDetailActivity.java

åœ¨ä¸Šé¢ä»‹ç»NineGridViewAdapterçš„ç¬¬äºŒéƒ¨åˆ†ä»£ç ä¸­ï¼Œæœ‰ä¸€ä¸ªIntentå¸¦ç€NineGridItemListè·³è½¬åˆ°äº†NineGridItemDetailActivityã€‚

æ‰€ä»¥è¿™ä¸ªActivityçš„ä½œç”¨å°±æ˜¯ï¼šæ¥æ”¶NineGridViewAdapterä¼ é€’è¿‡æ¥çš„å›¾ç‰‡ï¼Œå‡†å¤‡è¿›è¡Œå›¾ç‰‡è¯¦æƒ…å‘ˆç°ã€‚

è¿™é‡Œä¼šäº§ç”Ÿç–‘é—®ï¼šä¹å®«æ ¼é¢„è§ˆå›¾ç‰‡åœ¨å“ªå‘ˆç°çš„ï¼Œæ€ä¹ˆæ„Ÿè§‰è¿å›¾ç‰‡éƒ½æ²¡æœ‰å‘¢å°±ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…äº†ï¼Ÿ<img src="image/danshoutuosai.png" />

è¦æƒ³è§£å¼€è¿™ä¸ªç–‘æƒ‘ï¼Œè¯¦æƒ…è§<a href="#customView">è‡ªå®šä¹‰View</a>

è¯è¯´å›æ¥å›¾ç‰‡è¯¦æƒ…å‘ˆç°ï¼Œæˆ‘ä»¬ç”¨åˆ°äº†ViewPager2ï¼Œè¿™æ˜¯Googleå…¬å¸åœ¨2019å¹´æ–°æ¨å‡ºçš„æ§ä»¶ï¼Œæˆ‘ç”¨çš„è¿™ä¸€ç‰ˆæ˜¯1.0.0ç¨³å®šç‰ˆåŒæ—¶ä¹Ÿæ˜¯2019-11-30æˆªæ­¢æœ€æ–°ç‰ˆã€‚

å®˜æ–¹è¯´ï¼šå¦‚æœå¯ä»¥çš„è¯ï¼Œæœ€å¥½ä½¿ç”¨ViewPager2ä»£æ›¿ViewPagerï¼Œå› ä¸ºå®ƒç®€å•ï¼Œé«˜æ•ˆã€‚

åŸå…ˆViewPagerçš„å®ç°æœ€ç»å…¸çš„å°±æ˜¯ç»“åˆFragmentä¸€èµ·ä½¿ç”¨ã€‚ç°åœ¨ViewPager2å¯ä»¥ä¸ç”¨å®ç°Fragmentï¼Œä»…ä»…å†™ä¸€ä¸ªRecyclerViewçš„é€‚é…å™¨ï¼Œå°±å¯ä»¥äº†ã€‚

é€‚é…å™¨çš„å…·ä½“å†…å®¹æ”¾åˆ°ä¸‹ä¸€å°èŠ‚è®²ã€‚è¿™ä¸€èŠ‚æ¥çœ‹çœ‹å…³äºViewPager2çš„é¡µé¢åˆ‡æ¢ç›‘å¬æ˜¯å¦‚ä½•å®ç°çš„ã€‚

é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åœ¨onCreate()æ–¹æ³•ä¸­æ³¨å†Œä¸€ä¸ªå›è°ƒæ–¹æ³•

```java
 viewPager2.registerOnPageChangeCallback(onPageChangeCallback);
```

ä¸ºäº†é˜²æ­¢onCreate()æ–¹æ³•è¿‡äºè‡ƒè‚¿ï¼ŒæŠŠå®ƒçš„å®ç°å†™åˆ°å¤–é¢äº†

```java
ViewPager2.OnPageChangeCallback onPageChangeCallback = new ViewPager2.OnPageChangeCallback() {
        @Override
        public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
            super.onPageScrolled(position, positionOffset, positionOffsetPixels);
        }
        /**
         * é¡µé¢åˆ‡æ¢ç»“æŸä½ç½®: position
         */
        @SuppressLint("StringFormatMatches")
        @Override
        public void onPageSelected(int position) {
            super.onPageSelected(position);
            // è®°å½•ä½ç½®å˜åŒ–
            lastItem = currentItem;
            currentItem = position;
            // æ›´æ–°åº•éƒ¨æ–‡å­—
            tv_pager.setText(String.format(getString(R.string.select), currentItem + 1, nineGridItemList.size()));
            // å¤§äº0è¯´æ˜æœ‰æ’­æ”¾
            if (GSYVideoManager.instance().getPlayPosition() >= 0) {
                //å½“å‰æ’­æ”¾çš„ä½ç½®
                int currentPlayingPosition = GSYVideoManager.instance().getPlayPosition();
                if (currentPlayingPosition != currentItem) {
                    GSYVideoManager.onPause();
                    if (!GSYVideoManager.isFullState((Activity) context)) {
                        GSYVideoManager.releaseAllVideos();
                        viewPager2Adapter.notifyDataSetChanged();
                    }
                }
            }
        }
        @Override
        public void onPageScrollStateChanged(int state) {
            super.onPageScrollStateChanged(state);
        }
    };
```

è¿™é‡Œæœ‰ä¸‰ä¸ªæ–¹æ³•è¢«é‡å†™äº†

```java
public void onPageScrolled()
public void onPageSelected(int position)
public void onPageScrollStateChanged()    
```

æˆ‘ä»¬åªç”¨åˆ°äº†ä¸­é—´è¿™ä¸€ä¸ªã€‚è¿™ä¸ªæ–¹æ³•å¸¦æœ‰ä¸€ä¸ªå‚æ•°positionï¼Œå®ƒä»£è¡¨æˆ‘ä»¬æƒ³è¦å»çš„ä½ç½®ï¼Œä¹Ÿå°±æ˜¯é¡µé¢åˆ‡æ¢ç»“æŸçš„ä½ç½®ã€‚

æ‰€ä»¥ï¼Œåœ¨åˆ‡æ¢ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæŠŠå½“å‰çš„ä½ç½®è®°å½•ä¸€ä¸‹ã€‚å› ä¸ºæˆ‘ä»¬åªèƒ½ä¸€é¡µä¸€é¡µçš„åˆ‡æ¢ï¼Œæ‰€ä»¥åªéœ€è¦æŠŠå½“å‰é¡µé¢çš„ä½ç½®+1å°±æ˜¯ä¸‹ä¸€é¡µçš„åºå·äº†ï¼Œç„¶åæ›´æ–°åº•éƒ¨æ–‡å­—ã€‚

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è¦åˆ¤æ–­ï¼Œå¦‚æœæœ‰è§†é¢‘æ­£åœ¨æ’­æ”¾çš„è¯ï¼Œçœ‹ä¸€ä¸‹æ˜¯ä¸æ˜¯å½“å‰ä½ç½®æ­£åœ¨æ’­æ”¾è§†é¢‘ã€‚å¦‚æœä¸æ˜¯ï¼Œå°±æŠŠæ­£åœ¨æ’­æ”¾çš„è§†é¢‘æš‚åœï¼Œå›æ”¶èµ„æºã€‚

è‡³äºå…¶ä»–ä¸¤ä¸ªæ–¹æ³•ï¼Œè¿™é‡Œæ²¡æœ‰ç”¨åˆ°ï¼ˆå…¶å®æ˜¯æˆ‘è¿˜æ²¡æœ‰æŒæ¡ï¼šï¼‰

### 6ã€ViewPager2Adapter.java

ä¸Šé¢è¯´åˆ°äº†è°·æ­Œå®˜æ–¹2019å¹´æ¨å‡ºçš„æ–°æ§ä»¶ViewPager2éœ€è¦ä¸”ä»…ä»…éœ€è¦ä¸€ä¸ªRecyclerViewçš„è§†é¢‘å™¨å°±èƒ½å®ç°é¡µé¢åˆ‡æ¢ã€‚æ‰€ä»¥ä»è¿™ä¸ªé€‚é…å™¨ç±»çš„å£°æ˜æ–¹å¼ä¹Ÿå¯ä»¥çœ‹å‡ºæ¥ï¼Œå…¶å®ä»–å°±æ˜¯ä¸€ä¸ªRecyclerViewé€‚é…å™¨

```java
public class ViewPager2Adapter extends RecyclerView.Adapter<ViewPager2Adapter.ViewHolder>
```

æ—¢ç„¶æ˜¯RecyclerViewçš„é€‚é…å™¨ï¼Œé‚£ä¹ˆä»£ç çš„å†™æ³•å°±å›ºå®šäº†ï¼Œè¿˜æ˜¯é‚£äº”æ­¥

1ã€é€‚é…å™¨çš„æ„é€ æ–¹æ³•ï¼Œæ¥æ”¶å¤–éƒ¨ä¼ æ¥çš„æ•°æ®

2ã€å¡«å……å¸ƒå±€ï¼ŒonCreateViewHolder()

3ã€å£°æ˜å¹¶åˆå§‹åŒ–å¸ƒå±€ä¸­çš„æ§ä»¶ï¼ŒViewHolderç±»

4ã€æ§ä»¶ä¸Šç»‘å®šæ•°æ®ï¼ŒonBindViewHolder()

5ã€è¿”å›Itemçš„ä¸ªæ•°ï¼ŒgetItemCount()

è¿™é‡Œï¼Œæˆ‘ä»¬é‡ç‚¹å…³æ³¨ä¸€ä¸‹ç¬¬4æ­¥onBindViewHolder()

```java
@Override
public void onBindViewHolder(@NonNull ViewPager2Adapter.ViewHolder holder, int position) {
    // å­˜åœ¨è§†é¢‘åœ°å€
    if (existVideoUrl(nineGridItemList, position)) {
        holder.photoView.setVisibility(View.INVISIBLE);
        holder.gsyVideoPlayer.setVisibility(View.VISIBLE);
        holder.gsyVideoPlayer.setPlayTag(TAG);
        holder.gsyVideoPlayer.setUpLazy(
            nineGridItemList.get(position).getVideoUrl(),
            true,
            null,
            null,
            "");
        // éšè—title
        holder.gsyVideoPlayer.getTitleTextView().setVisibility(View.GONE);
        // éšè—è¿”å›é”®
        holder.gsyVideoPlayer.getBackButton().setVisibility(View.GONE);
        // è®¾ç½®å…¨å±æŒ‰é”®åŠŸèƒ½
        holder.gsyVideoPlayer.getFullscreenButton().setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                holder.gsyVideoPlayer.startWindowFullscreen(context, false, true);
            }
        });
        // é˜²æ­¢é”™ä½è®¾ç½®
        holder.gsyVideoPlayer.setPlayPosition(position);
        // æ˜¯å¦æ ¹æ®è§†é¢‘å°ºå¯¸ï¼Œè‡ªåŠ¨é€‰æ‹©ç«–å±å…¨å±æˆ–è€…æ¨ªå±å…¨å±
        holder.gsyVideoPlayer.setAutoFullWithSize(true);
        // éŸ³é¢‘ç„¦ç‚¹å†²çªæ—¶æ˜¯å¦é‡Šæ”¾
        holder.gsyVideoPlayer.setReleaseWhenLossAudio(false);
        // å…¨å±åŠ¨ç”»
        holder.gsyVideoPlayer.setShowFullAnimation(true);
        // å°å±æ—¶ä¸è§¦æ‘¸æ»‘åŠ¨
        holder.gsyVideoPlayer.setIsTouchWiget(false);
    } else {
        holder.photoView.setVisibility(View.VISIBLE);
        holder.gsyVideoPlayer.setVisibility(View.INVISIBLE);

        showExcessPic(nineGridItemList.get(position), holder.photoView);
        NineGridViewGroup.getImageLoader().onDisplayImage(
            context,
            holder.photoView,
            nineGridItemList.get(position).bigImageUrl);
    }
}
```

æ ¸å¿ƒå°±æ˜¯ä¸€ä¸ªifæ¡ä»¶åˆ¤æ–­è¯­å¥ï¼Œå¦‚æœæˆ‘ä»¬æ¥æ”¶åˆ°çš„æ•°æ®ä¸­ï¼Œå½“å‰Itemå­˜åœ¨è§†é¢‘åœ°å€ï¼Œé‚£ä¹ˆå°±å»æ’­æ”¾è§†é¢‘ï¼Œå¦åˆ™å»å‘ˆç°å›¾ç‰‡çš„å¤§å›¾ã€‚è‡³äºè§†é¢‘æ’­æ”¾çš„é‚£éƒ¨åˆ†ä»£ç ï¼Œæ˜¯æˆ‘ä»GSYVideoPlayerçš„Githubåœ°å€ä¸ŠCopyè¿‡æ¥çš„ã€‚äººå®¶ä¸“é—¨è¯´åˆ°äº†å¦‚ä½•åœ¨åˆ—è¡¨é‡Œä½¿ç”¨ã€‚

### 7ã€<a name="customView">è‡ªå®šä¹‰View</a>

### NineGridViewGroup.java

å…¶å®æ•´ä¸ªæ¡†æ¶çš„æ ¸å¿ƒå°±æ˜¯è¿™ä¸ªç±»ã€‚è‡ªå®šä¹‰Viewè¿™é‡Œæˆ‘ä¹Ÿä¸æ˜¯å¾ˆç†Ÿç»ƒï¼Œå°±è¯´è¯´æˆ‘çš„ç†è§£å§ã€‚

å› ä¸ºæˆ‘ä»¬éœ€è¦å‘ˆç°ä¸€ä¸ªä¹å®«æ ¼ï¼Œç®—æ˜¯ä¸€ç»„åŸºæœ¬çš„æ§ä»¶ï¼Œæ‰€ä»¥éœ€è¦ç»§æ‰¿ViewGroup

```java
public class NineGridViewGroup extends ViewGroup
```

åˆå› ä¸ºViewGroupæ˜¯ä¸ªæŠ½è±¡ç±»ï¼Œé‡Œé¢æœ‰ä¸ªæŠ½è±¡æ–¹æ³•onLayout()ï¼Œæ ¹æ®Javaè§„å®šï¼Œå®ç°ç±»å¿…é¡»å®ç°æŠ½è±¡ç±»ä¸­çš„æŠ½è±¡æ–¹æ³•ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿™é‡Œå¿…é¡»å»å®ç°onLayout(),ä¸‹é¢ä»£ç éƒ½æ˜¯å‰è¾ˆå†™çš„ï¼Œæˆ‘ä»¬ä¸€èµ·æ¥æ¬£èµä¸€ä¸‹ã€‚

### onLayout()

```java
@Override
protected void onLayout(boolean changed, int l, int t, int r, int b) {
    if (nineGridItemList == null) return;
    int childrenCount = nineGridItemList.size();
    for (int i = 0; i < childrenCount; i++) {
        ImageView childrenView = (ImageView) getChildAt(i);
        int rowNum = i / columnCount;
        int columnNum = i % columnCount;
        int left = (gridWidth + gridSpacing) * columnNum + getPaddingLeft();
        int top = (gridHeight + gridSpacing) * rowNum + getPaddingTop();
        int right = left + gridWidth;
        int bottom = top + gridHeight;
        childrenView.layout(left, top, right, bottom);
        if (mImageLoader != null) {
            mImageLoader.onDisplayImage(getContext(),
                                        childrenView,
                                        nineGridItemList.get(i).thumbnailUrl);
        }
    }
}
```

é€šè¿‡è§‚å¯Ÿä»£ç æˆ‘ä»¬å¯ä»¥å‘ç°ï¼ŒonLayout()æ ¸å¿ƒä»£ç å°±æ˜¯é€šè¿‡ä¸€ä¸ªforå¾ªç¯ï¼Œç”Ÿæˆäº†å¤šä¸ªImageViewï¼ŒåŒæ—¶è®¡ç®—å¹¶è§„å®šäº†æ¯ä¸ªImageViewçš„ä¸Šä¸‹å·¦å³çš„åæ ‡ä½ç½®ã€‚

è¿™é‡Œï¼Œä¸ºäº†ç›´è§‚ï¼Œæˆ‘æ‰‹ç”»äº†ä¸€ä¸ªè‰å›¾ï¼Œå¤§å®¶å¯ä»¥çœ‹ç€ç†è§£ä¸€ä¸‹ä»£ç ä¸­å„ä¸ªå‚æ•°çš„æ„æ€

éœ€è¦æ³¨æ„ä¸€ç‚¹å°±æ˜¯ä»£ç ä¸­çš„rowNumå’ŒcolumNuméƒ½æ˜¯ä»0å¼€å§‹ç®—èµ·çš„ã€‚

<img src="image\image20191130124258942.jpg" width=500 height=600/> 

è€ƒè™‘åˆ°å¦‚æœåªæœ‰ä¸€å¼ å›¾ç‰‡çš„è¯ï¼Œä¸åº”è¯¥æ˜¾ç¤ºåœ¨ä¹å®«æ ¼çš„å·¦ä¸Šè§’ï¼Œè€Œæ˜¯å•ç‹¬æ˜¾ç¤ºä¸€å¼ å›¾ç‰‡ï¼›åªæœ‰ä¸¤å¼ æˆ–å››å¼ å›¾ç‰‡çš„è¯ï¼Œåº”è¯¥ä¸¤å¼ å›¾ç‰‡å æ»¡å®½åº¦ã€‚

æ‰€ä»¥ï¼Œæˆ‘ä»¬å¿…é¡»é‡å†™ä¸€ä¸‹onMeasure()æ–¹æ³•ï¼Œä¸‹é¢çš„ä»£ç ä¹Ÿæ˜¯å‰è¾ˆå†™çš„ã€‚æˆ‘ä»¬æ™šè¾ˆéœ€è¦åšçš„å°±æ˜¯ï¼Œæ¬£èµï¼Œå­¦ä¹ ï¼Œæ¨¡ä»¿ã€‚ï¼ˆé€‚é…2å¼ å’Œ4å¼ å›¾ç‰‡ç›¸å…³ä»£ç æ˜¯æˆ‘åŠ ä¸Šå»çš„<img src="image/ku.png" />ï¼‰

### onMeasure()

```java
@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    super.onMeasure(widthMeasureSpec, heightMeasureSpec);
    // è·å–æ€»å®½åº¦,åŒ…å«paddingå€¼
    int width = MeasureSpec.getSize(widthMeasureSpec);
    int height = 0;
    int totalWidth = width - getPaddingLeft() - getPaddingRight();
    int gridNum = nineGridItemList.size();
    if (nineGridItemList != null &&  gridNum > 0) {
        // åªæœ‰ä¸€å¼ å›¾ç‰‡çš„æƒ…å†µ
        if (gridNum == 1) {
            gridWidth = singleMediaSize > totalWidth ? totalWidth : singleMediaSize;
            gridHeight = (int) (gridWidth / singleImageRatio);
            //çŸ«æ­£å›¾ç‰‡æ˜¾ç¤ºåŒºåŸŸå¤§å°ï¼Œä¸å…è®¸è¶…è¿‡æœ€å¤§æ˜¾ç¤ºèŒƒå›´
            if (gridHeight > singleMediaSize) {
                float ratio = singleMediaSize * 1.0f / gridHeight;
                gridWidth = (int) (gridWidth * ratio);
                gridHeight = singleMediaSize;
            }
        }
        // æœ‰ 2 å¼  æˆ– 4 å¼ å›¾ç‰‡çš„æƒ…å†µ
        else if (gridNum == 2 || gridNum == 4){
            gridWidth = singleMediaSize > totalWidth / 2 ? totalWidth/2 : singleMediaSize;
            gridHeight = (int) (gridWidth / singleImageRatio);
            //çŸ«æ­£å›¾ç‰‡æ˜¾ç¤ºåŒºåŸŸå¤§å°ï¼Œä¸å…è®¸è¶…è¿‡æœ€å¤§æ˜¾ç¤ºèŒƒå›´
            if (gridHeight > singleMediaSize) {
                float ratio = singleMediaSize * 1.0f / gridHeight;
                gridWidth = (int) (gridWidth * ratio);
                gridHeight = singleMediaSize;
            }
        }
        // æœ‰å…¶ä»–æ•°é‡å¤šå¼ å›¾ç‰‡çš„æƒ…å†µ
        else {
            // gridWidth = gridHeight = (totalWidth - gridSpacing * (columnCount - 1)) / columnCount;
            //è¿™é‡Œæ— è®ºæ˜¯å‡ å¼ å›¾ç‰‡ï¼Œå®½é«˜éƒ½æŒ‰æ€»å®½åº¦çš„ 1/3
            gridHeight = (totalWidth - gridSpacing * 2) / 3;
            gridWidth = gridHeight;
        }
        width = gridWidth * columnCount + gridSpacing * (columnCount - 1) + getPaddingLeft() + getPaddingRight();
        height = gridHeight * rowCount + gridSpacing * (rowCount - 1) + getPaddingTop() + getPaddingBottom();
    }
    // å­˜å‚¨è®¡ç®—å¾—åˆ°çš„ViewGroupçš„å®½é«˜
    setMeasuredDimension(width, height);
}
```

è‡ªå®šä¹‰Viewçš„æœ€åä¸€ç‚¹ï¼Œæˆ‘ä»¬æ§ä»¶è¦æƒ³æ¥æ”¶æ•°æ®ï¼Œéœ€è¦å†™ä¸€ä¸ªé€‚é…å™¨æ¥ä½œä¸ºæ•°æ®çš„å…¥å£ï¼Œè¿™æ ·ï¼Œåˆ«äººåœ¨ç”¨æˆ‘ä»¬è‡ªå®šä¹‰Viewçš„æ—¶å€™ï¼Œå°±èƒ½åƒä½¿ç”¨RecyclerView / ListViewä¸€æ ·ï¼Œå†™ä¸ªé€‚é…å™¨ï¼Œè®¾ç½®ç»™å¯¹åº”çš„æ§ä»¶ã€‚

### setAdapter()

```java
/**
     * è®¾ç½®é€‚é…å™¨
     * */
public void setAdapter(@NonNull NineGridViewAdapter adapter) {
    // åˆå§‹åŒ–mAdapterï¼Œæ­¤ç±»çš„å…¶ä»–æ–¹æ³•ä¼šç”¨åˆ°
    mAdapter = adapter;
    List<NineGridItem> nineGridItemList = adapter.getNineGridItemList();

    if (nineGridItemList == null || nineGridItemList.isEmpty()) {
        this.setVisibility(GONE);
        return;
    } else {
        this.setVisibility(VISIBLE);
    }

    int gridCount = nineGridItemList.size();
    if (maxGridSize > 0 && gridCount > maxGridSize) {
        nineGridItemList = nineGridItemList.subList(0, maxGridSize);
        gridCount = nineGridItemList.size();   //å†æ¬¡è·å–å›¾ç‰‡æ•°é‡
    }

    //é»˜è®¤æ˜¯3åˆ—æ˜¾ç¤ºï¼Œè¡Œæ•°æ ¹æ®å›¾ç‰‡çš„æ•°é‡å†³å®š
    rowCount = gridCount / 3 + (gridCount % 3 == 0 ? 0 : 1);
    columnCount = 3;
    //gridæ¨¡å¼ä¸‹ï¼Œæ˜¾ç¤º4å¼ ä½¿ç”¨2X2æ¨¡å¼
    if (mode == MODE_GRID) {
        if (gridCount == 4) {
            rowCount = 2;
            columnCount = 2;
        }
    }

    // ä¿è¯Viewçš„å¤ç”¨ï¼Œé¿å…é‡å¤åˆ›å»º
    if (this.nineGridItemList == null) {
        for (int i = 0; i < gridCount; i++) {
            ImageView iv = getImageView(i);
            if (iv == null)
                return;
            addView(iv, generateDefaultLayoutParams());
        }
    } else {
        int oldViewCount = this.nineGridItemList.size();
        int newViewCount = gridCount;
        if (oldViewCount > newViewCount) {
            removeViews(newViewCount, oldViewCount - newViewCount);
        } else if (oldViewCount < newViewCount) {
            for (int i = oldViewCount; i < newViewCount; i++) {
                ImageView iv = getImageView(i);
                if (iv == null)
                    return;
                addView(iv, generateDefaultLayoutParams());
            }
        }
    }
    //ä¿®æ”¹æœ€åä¸€ä¸ªæ¡ç›®ï¼Œå†³å®šæ˜¯å¦æ˜¾ç¤ºæ›´å¤š
    if (adapter.getNineGridItemList().size() > maxGridSize) {
        View child = getChildAt(maxGridSize - 1);
        if (child instanceof NineGridItemWrapperView) {
            NineGridItemWrapperView imageView = (NineGridItemWrapperView) child;
            imageView.setMoreNum(adapter.getNineGridItemList().size() - maxGridSize);
        }
    }
    this.nineGridItemList = nineGridItemList;
    // è¯·æ±‚é‡æ–°å¸ƒå±€
    requestLayout();
}
```

è¿™ç§è‡ªå®šä¹‰Viewçš„é€‚é…å™¨å†™èµ·æ¥éƒ½æ˜¯æ¯«æ— ç« æ³•ï¼Œä¸åƒå®˜æ–¹çš„RecyclerViewAdapterå’ŒBaseAdapteré‚£æ ·ï¼Œéƒ½è§„å®šå¥½äº†ç¬¬ä¸€æ­¥å†™å•¥ï¼Œç¬¬äºŒæ­¥å†™å•¥ã€‚

åªèƒ½å»è®°å¿†ã€ç§¯ç´¯äº†ï¼Œæˆ–è®¸å†™çš„å¤šäº†å°±ä¼šäº†ã€‚

## æ€»ç»“

### æ¶‰åŠåˆ°Androidä¸­æµ‹é‡å°ºå¯¸çš„å‡ ä¸ªæ–¹æ³•

```java
// æµ‹é‡å›¾ç‰‡åœ¨å½“å‰çª—å£çš„èµ·å§‹åæ ‡ï¼ˆNineGridViewAdapter.javaï¼‰
int[] points = new int[2];
nineGridViewItem.getLocationInWindow(points);
NineGridItem.imageViewX = points[0];
NineGridItem.imageViewY = points[1];
// æµ‹é‡æ•´ä¸ªå±å¹•çš„å®½ã€é«˜(NineGridItemDetailActivity.java)
DisplayMetrics metric = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(metric);
screenWidth = metric.widthPixels;
screenHeight = metric.heightPixels;
// è·å–è‡ªå®šä¹‰å¸ƒå±€çš„æ€»å®½åº¦,åŒ…å«paddingå€¼(NineGridViewGroup.java)
int width = MeasureSpec.getSize(widthMeasureSpec);
```



### ä»£ç çš„å…³é”®è·¯å¾„

ä¿—è¯è¯´ï¼šâ€œèƒ½åç€å°±ä¸ç«™ç€ï¼Œèƒ½èººç€å°±ä¸åç€â€ã€‚å“¦ï¼Œä¸å¯¹ã€‚åº”è¯¥æ˜¯ä¿—è¯è¯´ï¼šâ€œä¸€å›¾èƒœåƒè¨€ï¼â€

æ¥ä¸‹æ¥ï¼Œæœ‰è¯·ç¿ èŠ±ä¸Šé…¸~~ä¸Šå›¾ç‰‡<img src="image/yiwen.png"/>

<img src="image\process.jpg" width=800 height=1000 />



æ´‹æ´‹æ´’æ´’å†™äº†8k+å­—ï¼Œè¿˜æœ‰ä¸€äº›æ¯”å¦‚å±æ€§åŠ¨ç”»è¿˜æ²¡æœ‰å†™åˆ°ã€‚ç”±äºæˆ‘è¿˜æ²¡æœ‰å®Œå…¨æŒæ¡ï¼Œè¿™é‡Œå°±å…ˆåˆ¨ä¸ªå‘å§ï¼Œä»¥åç†Ÿç»ƒäº†å†æ¥å¡«å‘ã€‚



## æ„Ÿè°¢ <img src="image\sahua.png"/><img src="image/sahua.png" /><img src="image\sahua.png"/>

æ„Ÿè°¢ä»¥ä¸‹å‰è¾ˆåšå‡ºçš„è´¡çŒ®(æ’åä¸åˆ†å…ˆå)ï¼Œæ™šè¾ˆåªæ˜¯è¸©åœ¨äº†å·¨äººçš„è‚©è†€ä¸Šï¼Œæ¢å¥è¯è¯´ï¼Œæˆ‘åªæ˜¯æŠ±äº†å¤§ä½¬çš„è…¿<img src="image/ku.png" />

<p  style="text-align:center;"> <img src="image\xidatui.gif"/><br /><b>è¡·å¿ƒæ„Ÿè°¢ä»¥ä¸‹å‰è¾ˆä»¬ï¼Œè‡´æ•¬ï¼</b></p>
...       
| åºå· | æ¥æº   | ä½œè€…                                                         | æ ‡é¢˜                                                         |
| ---- | ------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 1    | Github | [å»–å­å°§](https://github.com/jeasonlzy/NineGridView)          | [ã€ŠNineGridViewã€‹](https://github.com/jeasonlzy/NineGridView) |
| 2    | Github | [laobie](https://github.com/laobie/NineGridImageView)        | [ã€ŠNineGridViewã€‹](https://github.com/laobie/NineGridImageView) |
| 3    | CSDN   | [sm7890123](https://blog.csdn.net/sm7890123)                 | [ã€Šå…³äºAndroid VideoViewå¯åŠ¨æ—¶é—ªå±çš„é—®é¢˜ã€‹](https://blog.csdn.net/sm7890123/article/details/80801732) |
| 4    | CSDN   | [ç‹è‹±è±ª]()                                                   | [ã€ŠAndroid å¸¦ä½ å½»åº•ç†è§£ Window å’Œ WindowManagerã€‹](https://blog.csdn.net/yhaolpz/article/details/68936932) |
| 5    | ç®€ä¹¦   | [é¸¡æ±¤ç¨‹åºå‘˜](https://www.jianshu.com/u/3f3c4485b55a)         | [ã€ŠAndroid Studio å¯ä»¥æ­£å¸¸ç¼–è¯‘ä½†æ˜¯ä»£ç çˆ†çº¢è§£å†³æ–¹æ³•ã€‹](https://www.jianshu.com/p/3fab5bb2ccd2) |
| 6    | ç®€ä¹¦   | [SparkInLee](https://www.jianshu.com/u/c95e489136f6)         | [ã€ŠAndroid Animatorè¿è¡ŒåŸç†è¯¦è§£ã€‹](https://www.jianshu.com/p/ee7e3d79006d) |
| 7    | CSDN   | [å°è‰çš„èƒ–å†¬ç“œ](https://blog.csdn.net/Yoryky)                 | [ã€Šæœ€æ–°android sdkç‰ˆæœ¬å·å’Œsdkçš„å¯¹åº”å…³ç³»ã€‹](https://blog.csdn.net/Yoryky/article/details/78973690) |
| 8    | ç®€ä¹¦   | [å§œåº·](https://www.jianshu.com/u/2c22c64b9aff)               | [ã€ŠoverridePendingTransition çš„ä½¿ç”¨ã€‹](https://www.jianshu.com/p/c19e607f08aa) |
| 9    | CSDN   | [å–ç«æŸ´çš„å°ç”·å­©2019](https://blog.csdn.net/u014644594)       | [ã€Šandroid åœ¨è‡ªå®šä¹‰viewä¸­è·å–å±å¹•å®½åº¦,å¹¶è®¾ç½®è‡ªå®šä¹‰æ§ä»¶ä½ç½®ã€‹](https://blog.csdn.net/u014644594/article/details/80526481) |
| 10   | åšå®¢å›­ | [LeoBoy](https://www.cnblogs.com/LeoBoy/)                    | [ã€ŠBigDecimalé™¤æ³•è¿ç®—çš„ä¸€ä¸ªå‘ã€‹](https://www.cnblogs.com/LeoBoy/p/5897754.html) |
| 11   | åšå®¢å›­ | [æœç€å¸Œæœ›å‰è¿›](https://www.cnblogs.com/LiuDanK/)             | [ã€Šè§£å†³AndroidStudio å®‰å“æ¨¡æ‹Ÿå™¨å®‰è£…åœ¨Dç›˜é—®é¢˜ã€‹](https://www.cnblogs.com/LiuDanK/articles/10106473.html) |
| 12   | åšå®¢å›­ | [å¼—å…°å…‹çš„çŒ«](https://www.cnblogs.com/mfrank/category/1118474.html) | [ã€ŠJavaæé«˜ç¯‡çš„è‹¥å¹²æ–‡ç« ã€‹](https://www.cnblogs.com/mfrank/category/1118474.html) |
| 13   | CSDN   | [codeä¸¶forward](https://blog.csdn.net/xingpidong)            | [ã€ŠAndroidè§†é¢‘æ’­æ”¾ä¹‹ViewPager+VideoViewã€‹](https://blog.csdn.net/xingpidong/article/details/52933185) |
| 14   | Github | [CarGuo](https://github.com/CarGuo)                          | [ã€ŠGSYVideoPlayerã€‹](https://github.com/CarGuo/GSYVideoPlayer) |
| 15   | çŸ¥ä¹   | [ç›¸æœºæ‹¿åäº†](https://www.zhihu.com/people/xin-hui-fei-xiang) | [ã€Šåç§å¿«é€Ÿå‹ç¼©gifçš„æ–¹æ³•ï¼Œä¸€å®šè¦æ”¶è—ã€‹](https://zhuanlan.zhihu.com/p/28866581) |
| ...  | ...    | è¿˜æœ‰å¾ˆå¤šå¤§ä½¬<br />æ²¡æœ‰è®°ä½åå­—                               | å¾ˆå¤šå¾ˆå¤šä¼˜ç§€çš„æ–‡ç« ï¼Œæˆ‘æ²¡é¡¾ä¸Šæ¬åˆ°è¿™é‡Œï¼Œåœ¨æ­¤ä¸€å¹¶è¡¨ç¤ºæ„Ÿè°¢ï¼     |


å¦å¤–æ„Ÿè°¢ä¸€äº›å·¥å…·ã€æ–‡æ¡£ã€èµ„æ–™ç½‘ç«™

1. PCç‰ˆQQ	  [Ctrl+Alt+Aæˆªé•¿å›¾å·¥å…·]()
2. ProcessOn   [åœ¨çº¿ç”»æµç¨‹å›¾]()
3. å¤šå‰æœç´¢ã€€ã€€[å·ç§°è¦å¹²æ‰ç™¾åº¦çš„ä¸è¿½è¸ªå¹¿å‘Šå°‘çš„æœç´¢å¼•æ“]()

è¿˜æœ‰ä¸€äº›Androidå­¦ä¹ ç«™ç‚¹æ¨è

1. [æ³¡åœ¨ç½‘ä¸Šçš„æ—¥å­](http://www.jcodecraeer.com/)
2. [æ˜é‡‘](https://juejin.im/)
3. [Androidå®˜æ–¹å¼€å‘è€…å¹³å°å›½å†…ç‰ˆ](https://developer.android.google.cn/)

<p  style="text-align:center;"><b>å†æ¬¡æ„Ÿè°¢ä»¥ä¸Šå‰è¾ˆä»¬ï¼Œè‡´æ•¬ï¼</b><br /><img src="image\xidatui.gif"/></p>
å¼•ç”¨ä¸€ä½èŒä¸šæ—…è¡Œå®¶å°é¹è¯´è¿‡çš„è¯ä½œä¸ºç»“å°¾å§ï¼š

â€œæˆ‘å¸Œæœ›æ¯ä¸ªäººéƒ½æœ‰æ¢¦æƒ³ï¼Œ

å¸Œæœ›æ¯ä¸ªæ¢¦æƒ³éƒ½å¾ˆç¿çƒ‚ï¼Œ

å¸Œæœ›æ¯ä¸ªç¿çƒ‚éƒ½èƒ½å®ç°ã€‚â€